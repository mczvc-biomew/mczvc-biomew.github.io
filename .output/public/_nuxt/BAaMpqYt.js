import{ah as B,a as O,r as S,ai as K,h as M,ae as z,aj as G,ak as J,k,j as Q,al as X,f as P,am as R,a8 as Y,M as Z,an as ee,R as U,ao as te}from"./1iLlZKFG.js";function re(t){let r=9;for(let s=0;s<t.length;)r=Math.imul(r^t.charCodeAt(s++),9**9);return((r^r>>>9)+65536).toString(16).substring(1,8).toLowerCase()}const ne=new Set(["onload","onerror"]);let oe;function N(){return oe}const W=Symbol("ScriptProxyTarget");function D(){}D[W]=!0;function V(t){return t.key||re(t.src||(typeof t.innerHTML=="string"?t.innerHTML:""))}function se(t,r){var T,$,j;const s=typeof t=="string"?{src:t}:t,e=r||{},i=e.head||N();if(!i)throw new Error("Missing Unhead context.");const u=V(s),f=(T=i._scripts)==null?void 0:T[u];if(f)return f.setupTriggerHandler(e.trigger),f;($=e.beforeInit)==null||$.call(e);const d=o=>{n.status=o,i.hooks.callHook("script:updated",F)};ne.forEach(o=>{const a=typeof s[o]=="function"?s[o].bind(e.eventContext):null;s[o]=c=>{d(o==="onload"?"loaded":o==="onerror"?"error":"loading"),a==null||a(c)}});const l={loaded:[],error:[]},g=(o,a)=>{if(l[o]){const c=l[o].push(a);return()=>{var p;return(p=l[o])==null?void 0:p.splice(c-1,1)}}return a(n.instance),()=>{}},y=new Promise(o=>{if(i.ssr)return;const a=p=>requestAnimationFrame(()=>o(p)),c=i.hooks.hook("script:updated",({script:p})=>{const h=p.status;if(p.id===u&&(h==="loaded"||h==="error")){if(h==="loaded")if(typeof e.use=="function"){const b=e.use();b&&a(b)}else a({});else h==="error"&&o(!1);c()}})}),n=Object.assign(y,{instance:!i.ssr&&((j=e==null?void 0:e.use)==null?void 0:j.call(e))||null,proxy:null,id:u,status:"awaitingLoad",remove(){var o,a;return(o=n._triggerAbortController)==null||o.abort(),n._triggerPromises=[],n.entry?(n.entry.dispose(),d("removed"),(a=i._scripts)==null||delete a[u],!0):!1},load(o){var a;if((a=n._triggerAbortController)==null||a.abort(),n._triggerPromises=[],!n.entry){d("loading");const c={defer:!0,fetchpriority:"low"};s.src&&(s.src.startsWith("http")||s.src.startsWith("//"))&&(c.crossorigin="anonymous",c.referrerpolicy="no-referrer"),n.entry=i.push({script:[{...c,...s,key:`script.${u}`}]},e)}return o&&g("loaded",o),y},onLoaded(o){return g("loaded",o)},onError(o){return g("error",o)},setupTriggerHandler(o){if(n.status==="awaitingLoad")if((typeof o>"u"||o==="client")&&!i.ssr||o==="server")n.load();else if(o instanceof Promise){if(i.ssr)return;n._triggerAbortController||(n._triggerAbortController=new AbortController,n._triggerAbortPromise=new Promise(c=>{n._triggerAbortController.signal.addEventListener("abort",()=>{n._triggerAbortController=null,c()})})),n._triggerPromises=n._triggerPromises||[];const a=n._triggerPromises.push(Promise.race([o.then(c=>typeof c>"u"||c?n.load:void 0),n._triggerAbortPromise]).catch(()=>{}).then(c=>{c==null||c()}).finally(()=>{var c;(c=n._triggerPromises)==null||c.splice(a,1)}))}else typeof o=="function"&&o(n.load)},_cbs:l});y.then(o=>{var a,c;o!==!1?(n.instance=o,(a=l.loaded)==null||a.forEach(p=>p(o)),l.loaded=null):((c=l.error)==null||c.forEach(p=>p()),l.error=null)});const F={script:n};n.setupTriggerHandler(e.trigger),n.$script=n;const H=(o,a,c)=>new Proxy((a?o==null?void 0:o[a]:o)||D,{get(p,h,b){var _;if(i.hooks.callHook("script:instance-fn",{script:n,fn:h,exists:h in p}),!a){const w=(_=e.stub)==null?void 0:_.call(e,{script:n,fn:h});if(w)return w}return p&&h in p&&typeof p[h]<"u"?Reflect.get(p,h,b):h===Symbol.iterator?[][Symbol.iterator]:H(a?o==null?void 0:o[a]:o,h,c||[h])},async apply(p,h,b){if(i.ssr&&p[W])return;let _;const w=m=>{_=m||_;for(let x=0;x<(c||[]).length;x++){const q=(c||[])[x];m=m==null?void 0:m[q]}return m};let v=w(n.instance);return v||(v=await new Promise(m=>{n.onLoaded(x=>{m(w(x))})})),typeof v=="function"?Reflect.apply(v,_,b):v}});n.proxy=H(n.instance);const E=new Proxy(n,{get(o,a){const c=a in n||String(a)[0]==="_"?n:n.proxy;return a==="then"||a==="catch"?n[a].bind(n):Reflect.get(c,a,c)}});return i._scripts=Object.assign(i._scripts||{},{[u]:E}),E}function ie(t){return typeof t=="function"?t():O(t)}function C(t){if(t instanceof Promise||t instanceof Date||t instanceof RegExp)return t;const r=ie(t);if(!t||!r)return r;if(Array.isArray(r))return r.map(s=>C(s));if(typeof r=="object"){const s={};for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){if(e==="titleTemplate"||e[0]==="o"&&e[1]==="n"){s[e]=O(r[e]);continue}s[e]=C(r[e])}return s}return r}const ae="usehead",I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},L="__unhead_injection_handler__";function A(){if(L in I)return I[L]();const t=B(ae);return t||N()}function ce(t,r={}){const s=r.head||A();if(s)return s.ssr?s.push(t,r):ue(s,t,r)}function ue(t,r,s={}){const e=S(!1),i=S({});K(()=>{i.value=e.value?{}:C(r)});const u=t.push(i.value,s);return M(i,d=>{u.patch(d)}),k()&&(z(()=>{u.dispose()}),G(()=>{e.value=!0}),J(()=>{e.value=!1})),u}function fe(t,r){if(!r)return;const s=(e,i)=>{if(!t._cbs[e])return i(t.instance),()=>{};let u=t._cbs[e].push(i);const f=()=>{var d;u&&((d=t._cbs[e])==null||d.splice(u-1,1),u=null)};return P(f),f};t.onLoaded=e=>s("loaded",e),t.onError=e=>s("error",e),P(()=>{var e;(e=t._triggerAbortController)==null||e.abort()})}function le(t,r){const s=typeof t=="string"?{src:t}:t,e=r||{},i=(e==null?void 0:e.head)||A();e.head=i;const u=k();if(e.eventContext=u,u&&typeof e.trigger>"u")e.trigger=Q;else if(X(e.trigger)){const d=e.trigger;let l;e.trigger=new Promise(g=>{l=M(d,y=>{y&&g(!0)},{immediate:!0}),P(()=>g(!1),!0)}).then(g=>(l==null||l(),g))}i._scriptStatusWatcher=i._scriptStatusWatcher||i.hooks.hook("script:updated",({script:d})=>{d._statusRef.value=d.status});const f=se(s,e);return f._statusRef=f._statusRef||S(f.status),fe(f,u),new Proxy(f,{get(d,l,g){return Reflect.get(d,l==="status"?"_statusRef":l,g)}})}function de(){return U().public["nuxt-scripts"]}const ge=["onNuxtReady","client"],pe=["preconnect","dns-prefetch"];function he(t,r,s){const{src:e}=t,i=te(e),u=r&&pe.includes(r),f=u?`${i.protocol}${i.host}`:e,d=!!i.host;if(!r||u&&!d)return;const l={href:f,rel:r,...be(t,["crossorigin","referrerpolicy","fetchpriority","integrity"])},g={fetchpriority:"low"};return r==="preload"&&(g.as="script"),d&&(g.crossorigin="anonymous",g.referrerpolicy="no-referrer"),ce({link:[R(l,g)]},{head:s,tagPriority:"high"})}function ye(t,r){var l,g,y;t=typeof t=="string"?{src:t}:t,r=R(r,(l=de())==null?void 0:l.defaultScriptOptions);const s=String(V(t)),e=Y(),i=r.head||A();e.$scripts=e.$scripts||Z({});const u=!!((g=e.$scripts)!=null&&g[s]);!r.warmupStrategy&&ge.includes(String(r.trigger))&&(r.warmupStrategy="preload"),r.trigger==="onNuxtReady"&&(r.trigger=ee),u||(y=performance==null?void 0:performance.mark)==null||y.call(performance,"mark_feature_usage",{detail:{feature:r.performanceMarkFeature??`nuxt-scripts:${s}`}});const f=le(t,r);f.warmup=n=>{f._warmupEl||(f._warmupEl=he(t,n,i))},r.warmupStrategy&&f.warmup(r.warmupStrategy);const d=f.remove;return f.remove=()=>{var n;return(n=f._warmupEl)==null||n.dispose(),e.$scripts[s]=void 0,d()},e.$scripts[s]=f,f}function me(t){return(U().public.scripts||{})[t]}function we(t,r,s){const e=me(t),i=Object.assign(s||{},typeof e=="object"?e:{}),u=r(i),f=R(i.scriptInput,u.scriptInput,{key:t}),d=Object.assign((i==null?void 0:i.scriptOptions)||{},u.scriptOptions||{}),l=d.beforeInit;return d.beforeInit=()=>{var g;l==null||l(),(g=u.clientInit)==null||g.call(u)},ye(f,d)}function be(t,r){const s={};for(const e of r)e in t&&(s[e]=t[e]);return s}export{ce as a,ye as b,me as s,we as u};
