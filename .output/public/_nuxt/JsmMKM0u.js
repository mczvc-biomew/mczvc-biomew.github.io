import{_ as q}from"./BEg_hQy4.js";import A from"./BrmvkvUZ.js";import{f as B,h as U,r as I,g as K,t as f,d as V,i as n,j,k as z,c as G,l as F,m as R,n as N,T as H,F as W,p as J,e as c,q as X,v as P,o as T,b as Q,x as Y,a as Z,y as ee,z as D,_ as te}from"./C-CEwqUb.js";import{u as se}from"./wmnGPQBJ.js";function ae(i,v,m){const[s={},u]=[{},v],e=B(()=>f(i)),r=s.key||U([u,typeof e.value=="string"?e.value:"",...oe(s)]);if(!r||typeof r!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+r);const d=r===u?"$f"+r:r;if(!s.baseURL&&typeof e.value=="string"&&e.value[0]==="/"&&e.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:b,lazy:h,default:k,transform:x,pick:p,watch:_,immediate:C,getCachedData:E,deep:w,dedupe:L,...g}=s,t=I({...K,...g,cache:typeof s.cache=="boolean"?void 0:s.cache}),o={server:b,lazy:h,default:k,transform:x,pick:p,immediate:C,getCachedData:E,deep:w,dedupe:L,watch:_===!1?[]:[t,e,..._||[]]};let a;return se(d,()=>{var M;(M=a==null?void 0:a.abort)==null||M.call(a,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),a=typeof AbortController<"u"?new AbortController:{};const y=f(s.timeout);let l;return y&&(l=setTimeout(()=>a.abort(new DOMException("Request aborted due to timeout.","AbortError")),y),a.signal.onabort=()=>clearTimeout(l)),(s.$fetch||globalThis.$fetch)(e.value,{signal:a.signal,...t}).finally(()=>{clearTimeout(l)})},o)}function oe(i){var m;const v=[((m=f(i.method))==null?void 0:m.toUpperCase())||"GET",f(i.baseURL)];for(const s of[i.params||i.query]){const u=f(s);if(!u)continue;const e={};for(const[r,d]of Object.entries(u))e[f(r)]=f(d);v.push(e)}return v}const ne={key:0,class:"toast"},re={class:"board"},$=6,S=5,ce=V({__name:"guess",setup(i){P(t=>({"5646ddfe":c(x)})),(async()=>{const{data:t}=await ae("/api/guess-words","$RXA5OmakJz"),o=t.value,a=o[Math.floor(Math.random()*o.length)];s.value=a,m.value=o})();const m=n(),s=n(""),u=n(Array($).fill(null)),e=n(""),r=n(0),d=n(!1),b=n(!1),h=n(""),k=n(),x=n("10rem"),p=t=>{h.value=t,X(()=>{x.value=`calc(${k.value.getBoundingClientRect().width}px + 2em)`}),setTimeout(()=>{h.value=""},2e3)},_=n(new Set),C=n(new Set),E=n(new Set);D("correctSet",_),D("closeMatchSet",C),D("submittedSet",E);const w=t=>{var o;if(t.key==="Enter"){if(e.value.length!==S)return;if(!((o=m.value)!=null&&o.includes(e.value.toUpperCase()))){p("Word not found!"),d.value=!0,setTimeout(()=>{d.value=!1},800);return}if(r.value>=$-1){p("Word is "+s.value);return}u.value[r.value]=e.value,r.value+=1,s.value.toLowerCase()===e.value&&(b.value=!0,p("Excellent!")),e.value=""}if(!b.value){if(t.key==="Backspace"){e.value=e.value.slice(0,-1);return}e.value.length>=S||(t.key.length===1&&(e.value=e.value+t.key),e.value.length>=S)}},L=t=>{t==="âŽ†"?t="Enter":t==="ðŸ”™"?t="Backspace":t=t.toLowerCase();const o=new KeyboardEvent("key",{key:t});w(o)};j(()=>{window.addEventListener("keydown",w)}),z(()=>{window.removeEventListener("keydown",w)});const g=t=>t===u.value.findIndex(o=>o==null);return(t,o)=>{const a=q,O=A;return T(),G(W,null,[F(H,{name:"fade"},{default:N(()=>[c(h).length>0?(T(),G("div",ne,[R("span",{id:"toast-text",ref_key:"toastTextEl",ref:k},Y(c(h)),513)])):Q("",!0)]),_:1}),R("div",re,[(T(!0),G(W,null,J(c(u),(y,l)=>(T(),Z(a,{"word-length":S,solution:c(s).toLowerCase(),guess:(g(l)?c(e):y)??"",class:ee({incorrect:g(l)&&c(d)}),isFinal:!g(l)&&y!=null,key:l},null,8,["solution","guess","class","isFinal"]))),128))]),F(O,{onKeyClick:L,correctSet:c(_),closeMatchSet:c(C),"submitted-set":c(E)},null,8,["correctSet","closeMatchSet","submitted-set"])],64)}}}),me=te(ce,[["__scopeId","data-v-d24db0ee"]]);export{me as default};
