import{S as D,P as f,G as C,W as _,M as L,a as x,b as M,C as v}from"./5bHSoEtU.js";import{i as E,j as P,a5 as b,c as A,b as S,e as z,o as R}from"./DCf4MDlJ.js";const y={key:0,id:"goldenFlower"},c=200,d=200,G=100,W={__name:"GoldenFlower",setup(B){const p=E(null);let o,u,a,r,s=[],i=0;function h(){const t=new L(new x(.05,16,16),new M({color:new v(`hsl(${i*3.6}, 100%, 50%)`)}));t.position.x=0,t.position.y=0,t.userData.targetRadius=Math.sqrt(i)*.1,t.userData.targetAngle=i*Math.PI*(3-Math.sqrt(5)),t.userData.radius=0,t.userData.angle=0,t.userData.birthtime=Date.now(),r.add(t),s.push(t),i++}function g(t){return t.getContext()}function w(){const t=document.getElementById("goldenFlower"),n=c/d;u=new D,o=new f(75,n,.1,1e3),r=new C,u.add(r),o.position.z=5,a=new _({antialias:!0}),a.setPixelRatio(window.devicePixelRatio),a.setClearColor(0,0);const e=g(a);e.disable(e.CULL_FACE),e.clearDepth(1),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.BLEND),a.setSize(c,d),a.setAnimationLoop(m),t.appendChild(a.domElement),a.getContext().canvas.addEventListener("webglcontextlost",function(F){try{window.removeEventListener("resize",l),w()}catch{console.log("webglContextLost!")}}),window.addEventListener("resize",l),l()}function l(){a.setSize(c,d),o.aspect=c/d,o.updateProjectionMatrix()}function m(){for(let n=0;n<s.length;n++){const e=s[n];e.userData.radius+=(e.userData.targetRadius-e.userData.radius)*.05,e.userData.angle+=(e.userData.targetAngle-e.userData.angle)*.05,e.position.x=e.userData.radius*Math.cos(e.userData.angle),e.position.y=e.userData.radius*Math.sin(e.userData.angle)}s.length<G&&h(),r.rotation.z+=.01,g(a).clearColor(0,0,0,0),a.render(u,o)}return P(()=>{try{w()}catch(t){p.value=t,console.error("!GoldenFlower")}}),b(()=>{window.removeEventListener("resize",l)}),(t,n)=>z(p)?S("",!0):(R(),A("div",y))}};export{W as default};
