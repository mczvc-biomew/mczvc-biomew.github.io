import{f as S,v as C,ai as I,ah as W,e as k,ak as x,H as h,h as E,r as O}from"./DKyFnZh0.js";function v(e){return I()?(W(e),!0):!1}function b(e){return typeof e=="function"?e():k(e)}const L=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const P=e=>e!=null,T=Object.prototype.toString,_=e=>T.call(e)==="[object Object]",y=()=>{};function N(e){return x()}function B(e,t=!0,n){N()?S(e,n):t?e():C(e)}const M=L?window:void 0;function m(e){var t;const n=b(e);return(t=n==null?void 0:n.$el)!=null?t:n}function D(...e){let t,n,r,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,u]=e,t=M):[t,n,r,u]=e,!t)return y;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const a=[],i=()=>{a.forEach(o=>o()),a.length=0},l=(o,s,g,d)=>(o.addEventListener(s,g,d),()=>o.removeEventListener(s,g,d)),f=h(()=>[m(t),b(u)],([o,s])=>{if(i(),!o)return;const g=_(s)?{...s}:s;a.push(...n.flatMap(d=>r.map(c=>l(o,d,c,g))))},{immediate:!0,flush:"post"}),p=()=>{f(),i()};return v(p),p}function G(){const e=O(!1),t=x();return t&&S(()=>{e.value=!0},t),e}function R(e){const t=G();return E(()=>(t.value,!!e()))}function V(e,t,n={}){const{root:r,rootMargin:u="0px",threshold:a=0,window:i=M,immediate:l=!0}=n,f=R(()=>i&&"IntersectionObserver"in i),p=E(()=>{const c=b(e);return(Array.isArray(c)?c:[c]).map(m).filter(P)});let o=y;const s=O(l),g=f.value?h(()=>[p.value,m(r),s.value],([c,j])=>{if(o(),!s.value||!c.length)return;const w=new IntersectionObserver(t,{root:m(j),rootMargin:u,threshold:a});c.forEach(A=>A&&w.observe(A)),o=()=>{w.disconnect(),o=y}},{immediate:l,flush:"post"}):y,d=()=>{o(),g(),s.value=!1};return v(d),{isSupported:f,isActive:s,pause(){o(),s.value=!1},resume(){s.value=!0},stop:d}}function H(e){let t;return new Promise(n=>{t=V(e,r=>{for(const u of r)u.isIntersecting&&n(!0)},{rootMargin:"30px 0px 0px 0px",threshold:0}),v(()=>n(!1))}).finally(()=>{t.stop()})}function q(e){const{el:t,trigger:n}=e,r=(Array.isArray(e.trigger)?e.trigger:[e.trigger]).filter(Boolean);if(!n||r.includes("immediate")||r.includes("onNuxtReady"))return"onNuxtReady";if(r.some(i=>["visibility","visible"].includes(i)))return t?H(t):new Promise(()=>{});const u={},a=new Promise(i=>{const l=typeof t<"u"?t:document.body,f=D(l,r,()=>{f(),i(!0)},{once:!0,passive:!0});B(()=>{h(l,p=>{p&&r.forEach(o=>{p.dataset[`script_${o}`]&&(f(),i(!0))})},{immediate:!0})}),v(()=>i(!1))});return Object.assign(a,{ssrAttrs:u})}export{q as u};
