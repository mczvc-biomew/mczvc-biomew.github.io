import{S as x,P as v,G as C,W as L,a as _,c as b,M,C as E}from"./Dk7D6Rs2.js";import{r as G,f as P,a8 as A,c as F,b as S,e as y,o as z}from"./DKyFnZh0.js";const R={key:0,id:"goldenFlower"},c=200,d=200,B=100,k={__name:"GoldenFlower",setup(I){const g=G(null);let o,u,a,r,s=[],l=0;function h(){const t=new _(new b(.05,16,16),new M({color:new E(`hsl(${l*3.6}, 100%, 50%)`)}));t.position.x=0,t.position.y=0,t.userData.targetRadius=Math.sqrt(l)*.1,t.userData.targetAngle=l*Math.PI*(3-Math.sqrt(5)),t.userData.radius=0,t.userData.angle=0,t.userData.birthtime=Date.now(),r.add(t),s.push(t),l++}function w(t){return t.getContext()}function p(){const t=document.getElementById("goldenFlower"),n=c/d;u=new x,o=new v(75,n,.1,1e3),r=new C,u.add(r),o.position.z=5,a=new L({antialias:!0}),a.setPixelRatio(window.devicePixelRatio),a.setClearColor(0,0);const e=w(a);e.disable(e.CULL_FACE),e.clearDepth(1),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.BLEND),a.setSize(c,d),a.setAnimationLoop(m),t.appendChild(a.domElement),a.getContext("webgl").canvas.addEventListener("webglcontextlost",function(f){try{window.removeEventListener("resize",i)}catch{console.log("GoldenFlower: webgl context lost forever!")}}),a.getContext("webgl").canvas.addEventListener("webglcontextrestored",function(f){try{p(),console.log("WebGL context restored!")}catch{console.log("GoldenFlower: Failed to restore webgl context.")}}),window.addEventListener("resize",i),i()}function i(){a.setSize(c,d),o.aspect=c/d,o.updateProjectionMatrix()}function m(){for(let n=0;n<s.length;n++){const e=s[n];e.userData.radius+=(e.userData.targetRadius-e.userData.radius)*.05,e.userData.angle+=(e.userData.targetAngle-e.userData.angle)*.05,e.position.x=e.userData.radius*Math.cos(e.userData.angle),e.position.y=e.userData.radius*Math.sin(e.userData.angle)}s.length<B&&h(),r.rotation.z+=.01,w(a).clearColor(0,0,0,0),a.render(u,o)}return P(()=>{try{p()}catch(t){g.value=t,console.error("!GoldenFlower")}}),A(()=>{window.removeEventListener("resize",i)}),(t,n)=>y(g)?S("",!0):(z(),F("div",R))}};export{k as default};
