import{d as k,f as L,a as i,r as c,m as u,l as w,n as T,D as b,o as x,c as M,t as E,y as B,q as D,z as A,A as z,T as I,C as r,p as o,aj as j,E as q}from"./LBw5qZOz.js";import{u as F}from"./C8faGZIo.js";const P=["src","data-author","data-title","type"],V=k({__name:"Music",props:{musicFile:String,musicAuthor:String,musicTitle:String,musicType:{default:"audio/mp3",type:String}},setup(S){L(e=>({"420eee0e":i(m)})),F({script:[{src:"/vendor/js/visualizer.js"}]});const n=S,a=c(),p=u("musicSingleton",()=>!1),l=c(),d=c(!1),y=e=>{e.preventDefault(),d.value?(r("#canvas",["bounce","paused"]),o("#canvas","active")):(setTimeout(()=>{o("#canvas",["bounce","paused"])},500),r("#canvas","active")),o("#canvas","always-show")},C=e=>{d.value=e;const t=document.getElementById("hero");if(e)t&&r(t,["foreground"]);else if(t){const s=["hover","foreground"];j(t,"foreground")||o(t,s)}},m=c("49");u("music-top",()=>m.value);const f=()=>{setTimeout(()=>{m.value=u("music-top").value+"px"},300)},h=()=>{o(i(a),"activated"),f(),i(p)||"__lazyMusicLoader"in window&&n.musicFile.length>0&&(window.__lazyMusicLoader.then(e=>{l.value=e(),l.value&&l.value(C)}),p.value=!0)},_=e=>{if(e.target===a.value){e.stopPropagation();const t=document.getElementById("hero");t&&o(t,["hover"])}},g=e=>{if(e.target===a.value){e.stopPropagation();const t=document.getElementById("hero");t&&r(t,["hover"])}},v=()=>{f()};return w(()=>{var e,t,s;(e=document.querySelector(".app"))==null||e.addEventListener("onDockingStationAvailable",v),T(u("music-top"),()=>{v()},{immediate:!0}),document.documentElement.addEventListener("click",h),(t=a.value)==null||t.addEventListener("mouseenter",_),(s=a.value)==null||s.addEventListener("mouseleave",g)}),b(()=>{var e,t,s;(e=document.querySelector(".app"))==null||e.removeEventListener("onDockingStationAvailable",v),document.documentElement.removeEventListener("click",h),(t=a.value)==null||t.removeEventListener("mouseenter",_),(s=a.value)==null||s.removeEventListener("mouseleave",g)}),(e,t)=>(x(),M("div",{class:"music",onClick:y},[E("audio",{id:"audio",src:n.musicFile,"data-author":n.musicAuthor,"data-title":n.musicTitle,type:n.musicType},null,8,P),B(I,{name:"bounce"},{default:D(()=>[A(E("canvas",{id:"canvas",width:"340",height:"400",ref_key:"canvas",ref:a},null,512),[[z,!i(d)]])]),_:1})]))}}),H=q(V,[["__scopeId","data-v-aae036b1"]]);export{H as default};
