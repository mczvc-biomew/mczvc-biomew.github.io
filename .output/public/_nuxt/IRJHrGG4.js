import{a2 as v,d as b,r as h,l as P,n as B,ak as S,j as $,o as z,c as E,I as l,a as n,e as L,al as j}from"./CuOCB3Dq.js";import{u as A}from"./Cgo0kFaQ.js";import{o as O,s as c,a as r,u as y,l as o,n as _}from"./D_P_Mt2j.js";import{u as R}from"./CYCWtalJ.js";O({app_id:c(),api_base:r(y([o("https://api-iam.intercom.io"),o("https://api-iam.eu.intercom.io"),o("https://api-iam.au.intercom.io")])),name:r(c()),email:r(c()),user_id:r(c()),alignment:r(y([o("left"),o("right")])),horizontal_padding:r(_()),vertical_padding:r(_())});function C(m){return A("intercom",a=>({scriptInput:{src:v("https://widget.intercom.io/widget",(a==null?void 0:a.app_id)||"")},schema:void 0,scriptOptions:{use(){return{Intercom:window.Intercom}}},clientInit:()=>{window.intercomSettings=a}}),m)}const V=b({__name:"ScriptIntercom",props:{appId:{},apiBase:{},name:{},email:{},userId:{},alignment:{},horizontalPadding:{},verticalPadding:{},trigger:{type:[String,Array,Boolean],default:"click"}},emits:["ready","error"],setup(m,{expose:a,emit:I}){const e=m,u=I,f=h(null),p=R({trigger:e.trigger,el:f}),s=h(!1),g=C({app_id:e.appId,app_base:e.apiBase,name:e.name,email:e.email,user_id:e.userId,alignment:e.alignment,horizontal_padding:e.horizontalPadding,vertical_padding:e.verticalPadding,scriptOptions:{trigger:p}}),{status:d,onLoaded:w}=g;e.trigger==="click"&&w(t=>{t.Intercom("show")}),a({intercom:g});let i;P(()=>{B(d,t=>{t==="loading"?(i=new MutationObserver(()=>{document.getElementById("intercom-frame")&&(s.value=!0,u("ready",g),i.disconnect())}),i.observe(document.body,{childList:!0,subtree:!0})):t==="error"&&u("error")})}),S(()=>{i==null||i.disconnect()});const k=$(()=>({style:{display:s.value?"none":"block",bottom:`${e.verticalPadding||20}px`,[e.alignment||"right"]:`${e.horizontalPadding||20}px`},...p instanceof Promise?p.ssrAttrs||{}:{}}));return(t,M)=>(z(),E("div",j({ref_key:"rootEl",ref:f},n(k)),[l(t.$slots,"default",{ready:n(s)}),n(d)==="awaitingLoad"?l(t.$slots,"awaitingLoad",{key:0}):n(d)==="loading"||!n(s)?l(t.$slots,"loading",{key:1}):n(d)==="error"?l(t.$slots,"error",{key:2}):L("",!0)],16))}});export{V as default};
