import he from"./BAdesmk2.js";import{_ as ke}from"./BE0RxQer.js";import be from"./DLAKqZjO.js";import{_ as we,l as Ce}from"./D6H2GEZu.js";import{_ as Se}from"./DXpiQcVH.js";import{d as Te,i as s,f as T,j as Be,H as A,aR as Me,k as Ie,c as D,a0 as xe,m as o,l as m,av as W,e as l,n as ze,T as Pe,o as B,a as $e,b as J,K as Ne,y as b,x as Ae,aN as F,V as Q,v as De,P as Fe,Y as He,_ as Ve}from"./BJX4Swrh.js";import{u as qe}from"./DDwFPVyS.js";import{s as O,a as X,b as Z,c as ee,d as Ee,e as Le,f as Re,g as Ye,h as Ke,i as je,j as Ge}from"./Drs4JbPW.js";import{s as Ue}from"./x_rD_Ya3.js";import"./scgmhQqD.js";const We={class:"YouMeKa"},Je={class:"music-station__overlay"},Qe={class:"cover-stretch"},Oe={class:"music-station"},Xe={class:"playlist-buttons__wrapper z-10"},Ze={key:1,class:"display-playing peach-sundress"},et={class:"flex justify-center items-center"},tt={class:"footer"},te="/music/YouMeKa/",lt="/assets/img/YouMeKa/",st="Jelly Sugar",at=Te({__name:"musicForGirlfriend",setup(it){De(e=>({"57e8d0e2":l(K),d8cf3f04:l(j),"585f19da":l(S),41426515:l(ye)}));const H=s(""),le=T(()=>`url('${Q(lt+"kitty-stop.jpg")}')`),se=T(()=>`url("${Q("/assets/img/icons/rewind.svg")}")`),_=s(!0),V=qe(".YouMeKa__music-docking-station"),ae=[{year:2024,months:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0]},{year:2025,months:[!1,!0,!0,!0,!0,!1,!1,!1,!1,!1,!1,!1]}];let c=T(()=>{const e=r.value;if(!(l(a)>e.length||l(a)<0))return r.value[a.value-1]});const r=s([O,X,Z,ee]),a=s(0),q=T(()=>r.value.length),w=s(0),M=s(0),v=s({title:"",display:"",author:"",type:"audio/mp3"}),C=s(!1),I=s(""),h=s(""),ie=(e,t)=>{a.value=1,w.value=a.value,e===0&&t===11?r.value=[O,X,Z,ee]:e===1&&t===1?r.value=[Ee,Le,Re]:e===1&&t===2?r.value=[Ye,Ke]:e===1&&t===3?r.value=[je]:e===1&&t===4&&(r.value=[Ge])},oe=()=>{if(c.value)for(let e=0;e<c.value.length;e++)c.value[e].playing=!1},d=s();let E=!1;const ne=()=>{a.value-=1,y=-1,a.value===w.value&&(y=M.value)},ue=()=>{a.value+=1,y=-1,a.value===w.value&&(y=M.value)};let p=null;const ce=e=>{const t=s(),u=new Date(0,0);t.value=u.getTime(),p!==null&&clearInterval(p),p=Ue(()=>{const n=new Date(t.value),g=n.getHours(),f=n.getMinutes();t.value=n.setMinutes(f+1),f===23&&d.value&&(d.value.style.transition="background-image 1s ease, opacity 1s ease",d.value.style.opacity="0",d.value.style.backgroundImage=`url("${te}set-three/take-off.gif")`,setTimeout(()=>{d.value.style.opacity="1"},1e3)),g===1&&f>=43&&(d.value&&(d.value.style.opacity="0",d.value.style.backgroundImage=e,setTimeout(()=>{d.value.style.opacity="1"},1e3)),p!==null&&clearInterval(p))},1e3)},k=new Map,L=[];function re(e){let t=0;for(const[u,n]of e.entries())t+=e.get(u).byteLength;return t}async function ve(e,t){const n=re(k)>42e6,g=await Ce(e);if(n){const f=L.shift();f&&t.has(f)&&(t.set(f,null),t.delete(f))}return t.set(e,g),L.push(e),g}async function x(e){let t=null;return k.has(e)?t=k.get(e):t=await ve(e,k),t.slice(0)}let i=s("album"),y=0;function de(e,t){y=t,w.value=a.value,M.value=t,e.playing=!0,H.value=e.src,h.value="",e.displayFontName&&(h.value=e.displayFontName),v.value.title=e.title,e.title.length>0&&(v.value.title=e.title.toUpperCase()),v.value.author="author"in e?e.author:"?",v.value.display="display"in e&&e.display?e.display:e.title,"type"in e&&e.type!==void 0?v.value.type=e.type:v.value.type="audio/mp3",e.src===`${te}set-three/Your-Call-Remastered.mp3`?ce(`url('${e.coverBg}')`):p&&clearInterval(p);const u=document.querySelector(".hk-center-cover-bg");E=!0,"coverBg"in e&&(u.style.backgroundImage=`url('${e.coverBg}')`,u.style.backgroundSize="min(400px, 100vw)",A(u,"playing"),u.style.opacity="0.9")}const R=e=>{if(oe(),Fe(document.querySelector(".music-widget-bg"),"invisible"),!c.value||c.value.length<=e)return;c.value.length-1>e?i.value==="album"&&setTimeout(async()=>{var n;const u=c.value[e+1].src;await x(u),(n=document.querySelector(`[data-src="${u}"]`))==null||n.classList.add("cached")},500):i.value==="all"&&r.value.length>a.value&&setTimeout(()=>{x(r.value[a.value][0].src)},500);const t=c.value[e];de(t,e)};let z=null;const fe=()=>{z!==null&&clearTimeout(z),i.value==="all"&&c.value&&c.value.length-1<=y&&a.value<q.value&&(a.value+=1,y=-1),(i.value==="album"||i.value==="all")&&c.value&&c.value.length>y&&(z=setTimeout(()=>{R(y+1),U()},500))},Y=s(!1),P=s(!1);let $=null;const me=()=>{$!==null&&clearTimeout($),_.value=!_.value,P.value=!P.value,l(_)||($=setTimeout(()=>{l(Y)||(I.value="",He(v.value.title,Y,document.querySelector(".animated-title"),I)),A(G.value,"twenty-three__yumika")},700))},pe=s("0px"),K=s("92%"),j=s("100%"),S=s("1"),ye=s("360deg"),G=s(),U=()=>{const{offsetWidth:e,offsetHeight:t}=document.querySelector(".playlist-view");K.value=`${e*.98}px`,j.value=`${t-35}px`,S.value="1",S.value="0deg"},ge=()=>{if(S.value="0",E){const e=document.querySelector(".hk-center-cover-bg"),t=document.querySelector(".playlist-view");e.style.transform=`translateY(calc(${t.getBoundingClientRect().height}px + 100px))`}},N=()=>{ge(),setTimeout(()=>{U()},710)};return Be(()=>{pe.value=document.querySelector(".playlist-view").offsetHeight.toString()+"px",setTimeout(()=>{V.reDock()},700),A(".pause-icon","girlfriend"),a.value=1,document.documentElement.addEventListener("click",N)}),Me(()=>{N()}),Ie(()=>{V.unDock(),p&&clearInterval(p),document.documentElement.removeEventListener("click",N)}),(e,t)=>{const u=he,n=ke,g=be,f=we,_e=Se;return B(),D("div",We,[xe(e.$slots,"default",{},void 0,!0),o("div",Je,[o("div",Qe,[o("div",{class:"hk-center-cover-bg",ref_key:"HTMLcoverBg",ref:d},null,512)]),t[3]||(t[3]=o("div",{class:"margin-center-cover"},null,-1))]),o("div",Oe,[m(u,{items:ae,onMonthClick:ie}),o("div",Xe,[m(n,{class:"backward-icon",style:W({visibility:l(a)>1?"visible":"hidden"}),onClick:ne},null,8,["style"]),m(n,{class:"playlist-icon",onClick:me}),m(n,{class:"forward-icon",style:W({visibility:l(a)<l(q)?"visible":"hidden"}),onClick:ue},null,8,["style"])]),m(Pe,{name:"collapse"},{default:ze(()=>[(B(),D("div",{class:"playlist-view",key:l(a)},[t[6]||(t[6]=o("div",{class:"playlist-bg"},null,-1)),l(_)&&l(r)[l(a)-1]?(B(),$e(g,{key:0,"song-list":l(r)[l(a)-1],"default-font-family":st,onSongClick:R,"cache-map":l(k)},null,8,["song-list","cache-map"])):J("",!0),l(_)?J("",!0):(B(),D("span",Ze,[t[4]||(t[4]=Ne("Now Playing:")),t[5]||(t[5]=o("br",null,null,-1)),o("b",{class:b([{"jelly-sugar":!l(h)||l(h)==="Jelly Sugar",serif:l(h)==="serif"},"animated-title"])},Ae(l(I)),3)])),o("div",{class:b(["music-controls",{show:l(P)}])},[m(n,{class:b(["repeat-album",{active:l(i)==="album"}]),onClick:t[0]||(t[0]=()=>{F(i)?i.value="album":i="album",C.value=!1})},null,8,["class"]),m(n,{class:b(["repeat-song",{active:l(i)==="song"}]),onClick:t[1]||(t[1]=()=>{F(i)?i.value="song":i="song",C.value=!0})},null,8,["class"]),m(n,{class:b(["repeat-album-to-the-next",{active:l(i)==="all"}]),onClick:t[2]||(t[2]=()=>{F(i)?i.value="all":i="all",C.value=!1})},null,8,["class"])],2)]))]),_:1}),t[7]||(t[7]=o("div",{class:"YouMeKa__music-docking-station"},null,-1))]),o("div",et,[o("div",{class:"music-widget-bg invisible",ref_key:"twentyThreeBg",ref:G},null,512)]),m(f,{musicFile:l(H),musicAuthor:l(v).author,musicTitle:l(v).title,musicType:l(v).type,"music-loop":l(C),"on-music-ended":fe,"fetch-buffer-src":x,stopIcon:l(le),rewindIcon:l(se),font:"Gotham Condensed Black",fontSize:42,fgColor:"#ce0060",shadowColor:"#8c1441"},null,8,["musicFile","musicAuthor","musicTitle","musicType","music-loop","stopIcon","rewindIcon"]),t[8]||(t[8]=o("div",{class:"hello-kitty-tall-wrapper"},[o("div",{class:"hello-kitty-tall"}),o("div",{class:"spacer"})],-1)),o("div",tt,[m(_e)])])}}}),yt=Ve(at,[["__scopeId","data-v-7ca8b9a1"]]);export{yt as default};
