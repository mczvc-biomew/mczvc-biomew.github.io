import{d as z,f as M,a as u,r as c,m as r,l as B,n as k,D,o as w,c as L,e as A,y as F,q as I,z as V,A as j,t as q,T as N,C as l,p as o,aj as P,E as G}from"./7i3kH2tB.js";import{u as H}from"./IqooLbRz.js";const U=["src","data-author","data-title","type"],J=z({__name:"Music",props:{musicFile:String,musicAuthor:String,musicTitle:String,musicType:{default:"audio/mp3",type:String}},setup(T){M(e=>({"32f4bc0e":u(m)})),H({script:[{src:"/vendor/js/visualizer.js"}]});const s=T,a=c(),i=r("musicSingleton",()=>!1),d=c(),v=c(!1),b=e=>{e.preventDefault(),v.value?(l("#canvas",["bounce","paused"]),o("#canvas","active")):(setTimeout(()=>{o("#canvas",["bounce","paused"])},500),l("#canvas","active")),o("#canvas","always-show")},x=e=>{v.value=e;const t=document.getElementById("hero");if(e)t&&l(t,["foreground"]);else if(t){const n=["hover","foreground"];P(t,"foreground")||o(t,n)}},m=c("49");r("music-top",()=>m.value);const _=()=>{setTimeout(()=>{m.value=r("music-top").value+"px"},300)},p=c(),g=()=>{"__lazyMusicLoader"in window&&s.musicFile.length>0&&(window.__lazyMusicLoader.then(e=>{d.value=e(),d.value&&(p.value=d.value(x))}),i.value=!0)},E=()=>{o(u(a),"activated"),_(),u(i)||g()},S=e=>{if(e.target===a.value){e.stopPropagation();const t=document.getElementById("hero");t&&o(t,["hover"])}},y=e=>{if(e.target===a.value){e.stopPropagation();const t=document.getElementById("hero");t&&l(t,["hover"])}},f=()=>{_()};return B(()=>{var e,t,n;k(()=>s.musicFile,h=>{var C;(C=p.value)==null||C.dispose(),i.value=!1,g()}),(e=document.querySelector(".app"))==null||e.addEventListener("onDockingStationAvailable",f),k(r("music-top"),()=>{f()},{immediate:!0}),document.documentElement.addEventListener("click",E),(t=a.value)==null||t.addEventListener("mouseenter",S),(n=a.value)==null||n.addEventListener("mouseleave",y)}),D(()=>{var e,t,n,h;(e=document.querySelector(".app"))==null||e.removeEventListener("onDockingStationAvailable",f),(t=p.value)==null||t.dispose(),i.value=!1,document.documentElement.removeEventListener("click",E),(n=a.value)==null||n.removeEventListener("mouseenter",S),(h=a.value)==null||h.removeEventListener("mouseleave",y)}),(e,t)=>(w(),L("div",{class:"music",onClick:b},[s.musicFile.length>0?(w(),L("audio",{key:0,id:"audio",src:s.musicFile,"data-author":s.musicAuthor,"data-title":s.musicTitle,type:s.musicType},null,8,U)):A("",!0),F(N,{name:"bounce"},{default:I(()=>[V(q("canvas",{id:"canvas",width:"340",height:"400",ref_key:"canvas",ref:a},null,512),[[j,!u(v)]])]),_:1})]))}}),Q=G(J,[["__scopeId","data-v-dbe12fc7"]]);export{Q as default};
