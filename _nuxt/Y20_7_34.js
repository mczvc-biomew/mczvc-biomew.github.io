import{u as C}from"./DXaU9ox3.js";import{u as E}from"./BybpyS9o.js";import{o as k,a,s as m,n as _}from"./D_P_Mt2j.js";import{d as h,r as w,f as R,H as S,aC as O,h as P,c as D,a3 as u,b,e as t,aO as $,o as x}from"./DKyFnZh0.js";k({id:m(),runtimeConfig:a(k({locale:a(m())})),tokenId:a(m()),cookieDomain:a(m()),cookieExpiry:a(_())});function A(f){let d=Promise.resolve();return E("crisp",o=>({scriptInput:{src:"https://client.crisp.chat/l.js"},schema:void 0,scriptOptions:{use(){const e=i=>{var s;return((s=window.$crisp)==null?void 0:s[i])||((...c)=>{d.then(()=>window.$crisp[i](...c))})};return{push:window.$crisp.push,do:e("do"),set:e("set"),get:e("get"),on:e("on"),off:e("off"),config:e("config"),help:e("help")}}},clientInit:()=>{var e;window.$crisp=[],window.CRISP_WEBSITE_ID=o.id,(e=o.runtimeConfig)!=null&&e.locale&&(window.CRISP_RUNTIME_CONFIG={locale:o.runtimeConfig.locale}),o.cookieDomain&&(window.CRISP_COOKIE_DOMAIN=o.cookieDomain),o.cookieExpiry&&(window.CRISP_COOKIE_EXPIRATION=o.cookieExpiry),o.tokenId&&(window.CRISP_TOKEN_ID=o.tokenId),d=new Promise(i=>{window.CRISP_READY_TRIGGER=i})}}),f)}const M=h({__name:"ScriptCrisp",props:{trigger:{type:[String,Array,Boolean],default:"click"},id:{},runtimeConfig:{},tokenId:{},cookieDomain:{},cookieExpiry:{}},emits:["ready","error"],setup(f,{expose:d,emit:o}){const e=f,i=o,s=w(null),c=C({trigger:e.trigger,el:s}),l=w(!1),g=A({id:e.id,runtimeConfig:e.runtimeConfig,tokenId:e.tokenId,cookieDomain:e.cookieDomain,cookieExpiry:e.cookieExpiry,scriptOptions:{trigger:c}}),{onLoaded:I,status:p}=g;e.trigger==="click"&&I(r=>{r.do("chat:open")}),d({crisp:g});let n;R(()=>{S(p,r=>{r==="loaded"?(n=new MutationObserver(()=>{document.getElementById("crisp-chatbox")&&(l.value=!0,i("ready",g),n.disconnect())}),n.observe(document.body,{childList:!0,subtree:!0})):r==="error"&&i("error")})}),O(()=>{n==null||n.disconnect()});const y=P(()=>({...c instanceof Promise?c.ssrAttrs||{}:{}}));return(r,B)=>(x(),D("div",$({ref_key:"rootEl",ref:s,style:{display:t(l)?"none":"block"}},t(y)),[u(r.$slots,"default",{ready:t(l)}),t(p)==="awaitingLoad"?u(r.$slots,"awaitingLoad",{key:0}):t(p)==="loading"||!t(l)?u(r.$slots,"loading",{key:1}):t(p)==="error"?u(r.$slots,"error",{key:2}):b("",!0)],16))}});export{M as default};
